/* Definición de variables CSS para el Tema Claro (valores predeterminados) */
:root {
    --bg-body: #fefcf6; /* Color de fondo del cuerpo de la página */
    --bg-container: #ffffff; /* Color de fondo de los contenedores principales (app-container, historial-container) */
    --text-primary: #1f2937; /* Color principal del texto (títulos, etiquetas de formulario) */
    --text-secondary: #4b3b22; /* Color secundario del texto (texto general) */
    --border-color: #1f2937; /* Color de los bordes de los campos de entrada */
    --header-bg: #1f2937; /* Color de fondo del encabezado superior */
    --btn-primary-bg: #ffffff; /* Color de fondo de los botones primarios */
    --btn-primary-text: #ffffff; /* Color del texto de los botones primarios */
    --btn-primary-hover: #1d287982; /* Color de fondo de los botones al pasar el ratón */
    --btn-primary-hover-shadow: rgba(37, 26, 110, 0.2); /* Sombra de los botones al pasar el ratón */
    --factura-preview-bg: #fffbe6; /* Color de fondo de la previsualización de la factura */
    --factura-preview-border: #000000; /* Color del borde de la previsualización de la factura */
    --table-header-bg: #1f2937; /* Color de fondo de la cabecera de la tabla del historial */
    --table-header-text: #ffffff; /* Color del texto de la cabecera de la tabla del historial */
    --table-row-border: #000000; /* Color del borde de las filas de la tabla */
    --table-cell-border: #000000; /* Color del borde de las celdas de la tabla */
}

/* Tema Oscuro: Sobrescribe las variables CSS cuando el cuerpo tiene la clase 'dark' */
body.dark {
    --bg-body: #203046; /* Fondo del cuerpo en modo oscuro */
    --bg-container: #04152cd1; /* Fondo de los contenedores en modo oscuro */
    --text-primary: #e5e7eb; /* Texto principal en modo oscuro */
    --text-secondary: #f3f8ff; /* Texto secundario en modo oscuro */
    --border-color: #4b5563; /* Bordes en modo oscuro */
    --header-bg: #1f2937; /* Fondo del encabezado en modo oscuro */
    --btn-primary-bg: #475366; /* Fondo de botones primarios en modo oscuro */
    --btn-primary-text: #ffffff; /* Texto de botones primarios en modo oscuro */
    --btn-primary-shadow: rgba(23, 42, 72, 0.3); /* Sombra de botones primarios en modo oscuro */
    --btn-primary-hover: #233e81; /* Fondo de botones al pasar el ratón en modo oscuro */
    --factura-preview-bg: #2a384e; /* Fondo de previsualización de factura en modo oscuro */
    --factura-preview-border: #4b5563; /* Borde de previsualización de factura en modo oscuro */
    --table-header-bg: #374151; /* Fondo de la cabecera de la tabla en modo oscuro */
    --table-header-text: #ffffff; /* Texto de la cabecera de la tabla en modo oscuro */
    --table-row-border: #4b5563; /* Borde de las filas de la tabla en modo oscuro */
    --table-cell-border: #4b5563; /* Borde de las celdas de la tabla en modo oscuro */
}

/* Estilos generales para el cuerpo, inputs, selects y botones */
body,
input,
select,
button {
    font-family: 'Inter', sans-serif; /* Aplica la fuente Inter */
    background-color: var(--bg-body); /* Color de fondo dinámico según el tema */
    color: var(--text-secondary); /* Color del texto dinámico según el tema */
    margin: 0; /* Elimina el margen por defecto */
    padding: 0; /* Elimina el padding por defecto */
    box-sizing: border-box; /* Incluye padding y borde en el tamaño total del elemento */
    transition: background-color 0.3s ease, color 0.3s ease; /* Transición suave para cambios de tema */
}

/* Estilos para el contenedor principal de la aplicación */
#app-container {
    max-width: 480px; /* Ancho máximo del contenedor */
    margin: 2rem auto; /* Margen superior/inferior y centrado horizontal */
    background: var(--bg-container); /* Color de fondo dinámico */
    padding: 2rem; /* Relleno interno */
    border-radius: 12px; /* Bordes redondeados */
    box-shadow: 0 8px 20px rgba(101, 67, 33, 0.2); /* Sombra para el efecto de elevación */
    color: var(--text-secondary); /* Color del texto dinámico */
    transition: background 0.3s ease, box-shadow 0.3s ease; /* Transición para cambios de tema */
}

/* Sombra específica para el app-container en modo oscuro */
body.dark #app-container {
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.4);
}

/* Estilos para el título principal dentro del app-container */
#app-container h1 {
    text-align: center; /* Centra el texto */
    font-weight: 700; /* Negrita */
    font-size: 1.9rem; /* Tamaño de fuente */
    margin-bottom: 1.5rem; /* Margen inferior */
    color: var(--text-primary); /* Color del texto dinámico */
    text-shadow: 1px 1px 0 rgba(89, 79, 48, 0.3); /* Sombra de texto para el modo claro */
    transition: color 0.3s ease; /* Transición para el color del texto */
}

/* Elimina la sombra del texto del título en modo oscuro */
body.dark #app-container h1 {
    text-shadow: none;
}

/* Estilos para el mensaje de estado (éxito, error, info) */
#statusMessage {
    position: fixed; /* Posición fija en la pantalla */
    top: 20px; /* Distancia desde la parte superior */
    left: 50%; /* Centrado horizontal */
    transform: translateX(-50%); /* Ajuste para centrado perfecto */
    padding: 10px 20px; /* Relleno interno */
    border-radius: 5px; /* Bordes redondeados */
    z-index: 1000; /* Asegura que esté por encima de otros elementos */
    color: white; /* Color del texto */
    font-weight: bold; /* Negrita */
    text-align: center; /* Centra el texto */
    box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2); /* Sombra */
    opacity: 0; /* Inicialmente transparente */
    pointer-events: none; /* No interactuable cuando está oculto */
    transition: opacity 0.3s ease; /* Transición suave para la opacidad */
}

/* Muestra el mensaje de estado (hace que sea visible) */
#statusMessage.show {
    opacity: 1; /* Hace el mensaje completamente visible */
    pointer-events: auto; /* Permite la interacción cuando es visible */
}

/* Colores de fondo para diferentes tipos de mensajes de estado */
#statusMessage.error {
    background-color: #dc3545; /* Rojo para errores */
}

#statusMessage.success {
    background-color: #28a745; /* Verde para éxito */
}

#statusMessage.info {
    background-color: #007bff; /* Azul para información */
}

/* Estilos para los grupos de formulario (label + input/select) */
.form-group {
    display: flex; /* Usa flexbox para el diseño */
    flex-direction: column; /* Organiza los elementos en columna */
    margin-bottom: 1rem; /* Margen inferior entre grupos */
}

/* Estilos para las etiquetas de los campos de formulario */
.form-group label {
    font-weight: 600; /* Seminegrita */
    margin-bottom: 0.35rem; /* Margen inferior */
    color: var(--text-primary); /* Color del texto dinámico */
    transition: color 0.3s ease; /* Transición para el color del texto */
}

/* Estilos para los campos de entrada de fecha, texto, número y selectores */
input[type="date"],
input[type="text"],
input[type="number"],
select {
    padding: 0.5rem 0.75rem; /* Relleno interno */
    border: 2px solid var(--border-color); /* Borde dinámico */
    border-radius: 8px; /* Bordes redondeados */
    font-size: 1rem; /* Tamaño de fuente */
    color: var(--text-primary); /* Color del texto dinámico */
    background-color: var(--bg-body); /* Color de fondo dinámico */
    transition: border-color 0.3s ease, box-shadow 0.3s ease, background-color 0.3s ease, color 0.3s ease; /* Transiciones suaves */
    width: 100%; /* Ocupa todo el ancho disponible */
    box-sizing: border-box; /* Incluye padding y borde en el ancho */
}

/* Estilos para los campos de entrada al estar enfocados (haciendo clic en ellos) */
input[type="date"]:focus,
input[type="text"]:focus,
input[type="number"]:focus,
select:focus {
    border-color: var(--btn-primary-hover); /* Cambia el color del borde */
    box-shadow: 0 0 6px var(--btn-primary-hover-shadow); /* Añade una sombra */
    outline: none; /* Elimina el contorno por defecto del navegador */
}

/* Estilos generales para los botones */
button {
    background-color: var(--btn-primary-bg); /* Color de fondo dinámico */
    border: none; /* Sin borde */
    color: var(--btn-primary-text); /* Color del texto dinámico */
    font-weight: 700; /* Negrita */
    font-size: 1.1rem; /* Tamaño de fuente */
    padding: 0.75rem 1.8rem; /* Relleno interno */
    border-radius: 14px; /* Bordes redondeados */
    cursor: pointer; /* Cambia el cursor a una mano al pasar por encima */
    box-shadow: 0 6px 14px var(--btn-primary-shadow); /* Sombra */
    transition: background-color 0.3s ease, box-shadow 0.3s ease; /* Transiciones suaves */
    align-self: center; /* Centra el botón en un contenedor flex */
    user-select: none; /* Evita que el texto del botón sea seleccionable */
}

/* Estilos para los botones al pasar el ratón o al estar enfocados */
button:hover,
button:focus {
    background-color: var(--btn-primary-hover); /* Cambia el color de fondo */
    box-shadow: 0 8px 20px var(--btn-primary-hover-shadow); /* Cambia la sombra */
    color: var(--btn-primary-text); /* Mantiene el color del texto */
    outline: none; /* Elimina el contorno por defecto */
}

/* Estilos para los botones al ser presionados (estado activo) */
button:active {
    box-shadow: 0 3px 8px var(--btn-primary-hover-shadow); /* Sombra más pequeña para efecto de "presionado" */
}

/* Estilos específicos para los botones de acción de la factura (Descargar, Nuevo Cálculo) */
.factura-actions button {
    width: 160px; /* Ancho fijo */
    background-color: var(--text-primary); /* Color de fondo dinámico */
    box-shadow: 0 5px 10px rgba(89, 79, 48, 0.7); /* Sombra */
    color: var(--bg-container); /* Color del texto dinámico */
    transition: background-color 0.3s ease, box-shadow 0.3s ease; /* Transiciones suaves */
    user-select: none; /* Evita la selección de texto */
}

/* Estilos específicos para los botones de acción de la factura en modo oscuro */
body.dark .factura-actions button {
    background-color: #3b82f6; /* Fondo azul */
    box-shadow: 0 5px 10px rgba(59, 130, 246, 0.7); /* Sombra azul */
    color: white; /* Texto blanco */
}

/* Estilos para los botones de acción de la factura al pasar el ratón o al estar enfocados */
.factura-actions button:hover,
.factura-actions button:focus {
    background-color: var(--btn-primary-hover); /* Cambia el color de fondo */
    box-shadow: 0 6px 14px var(--btn-primary-hover-shadow); /* Cambia la sombra */
    outline: none; /* Elimina el contorno */
}

/* Estilos para los botones de acción de la factura al ser presionados */
.factura-actions button:active {
    box-shadow: 0 3px 8px var(--btn-primary-hover-shadow); /* Sombra más pequeña */
}

/* Estilos para el formulario de compra */
#compraForm {
    display: grid; /* Usa grid para el diseño */
    grid-template-columns: 1fr; /* Una columna por defecto */
    gap: 1rem; /* Espacio entre elementos */
}

/* Estilos para el contenedor de acciones del formulario */
.form-actions {
    margin-top: 1rem; /* Margen superior */
    display: flex; /* Usa flexbox */
    justify-content: center; /* Centra el contenido horizontalmente */
}

/* Estilos para el contenedor de la previsualización de la factura */
#factura-container {
    max-width: 600px; /* Ancho máximo */
    margin: 2rem auto; /* Margen y centrado */
    padding: 1.5rem 2rem; /* Relleno */
    background-color: var(--bg-container); /* Fondo dinámico */
    border-radius: 14px; /* Bordes redondeados */
    box-shadow: 0 8px 18px rgba(101, 67, 33, 0.25); /* Sombra */
    color: var(--text-secondary); /* Color del texto dinámico */
    display: none; /* Inicialmente oculto */
    flex-direction: column; /* Elementos en columna */
    gap: 1rem; /* Espacio entre elementos */
    transition: background-color 0.3s ease, color 0.3s ease, box-shadow 0.3s ease; /* Transiciones suaves */
}

/* Sombra específica para factura-container en modo oscuro */
body.dark #factura-container {
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
}

/* Estilos para el título de la previsualización de la factura */
#factura-container h2 {
    text-align: center; /* Centra el texto */
    font-weight: 700; /* Negrita */
    font-size: 1.8rem; /* Tamaño de fuente */
    color: var(--text-primary); /* Color del texto dinámico */
    text-shadow: 1px 1px 0 rgba(89, 79, 48, 0.3); /* Sombra de texto */
    margin-bottom: 0.75rem; /* Margen inferior */
    transition: color 0.3s ease; /* Transición para el color del texto */
}

/* Elimina la sombra del texto del título de la factura en modo oscuro */
body.dark #factura-container h2 {
    text-shadow: none;
}

/* Estilos para el contenido de la previsualización de la factura */
.factura-preview-content {
    border: 2px solid var(--factura-preview-border); /* Borde dinámico */
    padding: 1.5rem 2rem; /* Relleno */
    border-radius: 12px; /* Bordes redondeados */
    background-color: var(--factura-preview-bg); /* Fondo dinámico */
    box-shadow: inset 0 0 10px var(--factura-preview-border); /* Sombra interna */
    font-size: 1rem; /* Tamaño de fuente */
    color: var(--text-secondary); /* Color del texto dinámico */
    line-height: 1.5; /* Altura de línea */
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease; /* Transiciones suaves */
}

/* Margen para los párrafos dentro de la previsualización de la factura */
.factura-preview-content p {
    margin: 0.4rem 0;
}

/* Estilos para el divisor (línea horizontal) en la previsualización de la factura */
.factura-preview-content .divider {
    border-top: 1px dashed var(--factura-preview-border); /* Borde superior punteado */
    margin: 10px 0; /* Margen */
    transition: border-color 0.3s ease; /* Transición para el color del borde */
}

/* Estilos para el total final en la previsualización de la factura */
.factura-preview-content .factura-total {
    font-weight: 700; /* Negrita */
    color: var(--text-primary); /* Color del texto dinámico */
    text-align: right; /* Alineación a la derecha */
    transition: color 0.3s ease; /* Transición para el color del texto */
}

/* Estilos para el contenedor del historial de facturación */
#historial-container {
    max-width: 48rem; /* Ancho máximo */
    width: 100%; /* Ocupa todo el ancho disponible */
    padding: 1.5rem; /* Relleno */
    margin-top: 2.5rem; /* Margen superior */
    background-color: #ffffff; /* Fondo blanco por defecto (será sobrescrito por la variable) */
    border-radius: 0.75rem; /* Bordes redondeados */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 2px 4px rgba(0, 0, 0, 0.06); /* Sombra (equivalente a shadow-md de Tailwind) */
    background-color: var(--bg-container); /* Fondo dinámico según el tema */
    color: var(--text-secondary); /* Color del texto dinámico */
    transition: background-color 0.3s ease, color 0.3s ease; /* Transiciones suaves */
}

/* Sombra específica para historial-container en modo oscuro */
body.dark #historial-container {
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
}

/* Estilos para el título del historial de facturación */
#historial-container h2 {
    text-align: center; /* Centra el texto */
    font-size: 2xl; /* Tamaño de fuente */
    font-weight: 700; /* Negrita */
    margin-bottom: 1.5rem; /* Margen inferior */
    color: var(--text-primary); /* Color del texto dinámico */
    transition: color 0.3s ease; /* Transición para el color del texto */
}

/* Estilos para la tabla dentro del contenedor de scroll */
.tabla-scroll-wrapper table {
    border: 2px solid var(--table-cell-border); /* Borde de la tabla dinámico */
    transition: border-color 0.3s ease; /* Transición para el color del borde */
}

/* Estilos para la cabecera de la tabla (thead) */
.tabla-scroll-wrapper thead {
    background-color: var(--table-header-bg); /* Fondo de la cabecera dinámico */
    color: var(--table-header-text); /* Color del texto de la cabecera dinámico */
    transition: background-color 0.3s ease, color 0.3s ease; /* Transiciones suaves */
}

/* Estilos para las celdas de la cabecera (th) */
.tabla-scroll-wrapper th {
    border: 1px solid var(--table-cell-border); /* Borde de las celdas dinámico */
    /* Se elimina la propiedad 'color' aquí para que herede de 'thead' */
}

/* Estilos para las celdas de datos (td) */
.tabla-scroll-wrapper td {
    border: 1px solid var(--table-cell-border); /* Borde de las celdas dinámico */
    color: var(--text-primary); /* Color del texto de las celdas dinámico */
    transition: border-color 0.3s ease, color 0.3s ease; /* Transiciones suaves */
}

/* Estilos para las filas impares del cuerpo de la tabla en modo oscuro */
body.dark .tabla-scroll-wrapper tbody tr:nth-child(odd) {
    background-color: #2a384e; /* Fondo oscuro para filas impares */
}

/* Estilos para las filas pares del cuerpo de la tabla en modo oscuro */
body.dark .tabla-scroll-wrapper tbody tr:nth-child(even) {
    background-color: #1f2937; /* Fondo ligeramente más oscuro para filas pares */
}

/* Estilos para el botón de eliminar en la tabla */
.eliminar-btn {
    background-color: #ef4444; /* Rojo */
    color: white; /* Texto blanco */
    font-weight: 700; /* Negrita */
    padding: 0.25rem 0.75rem; /* Relleno */
    border-radius: 0.25rem; /* Bordes redondeados */
    box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); /* Sombra ligera */
    transition: background-color 0.2s; /* Transición suave para el color de fondo */
}

/* Estilos para el botón de eliminar al pasar el ratón */
.eliminar-btn:hover {
    background-color: #dc2626; /* Rojo más oscuro */
}

/* Media Queries para responsividad */

/* Estilos para pantallas pequeñas (hasta 480px) */
@media (max-width: 480px) {
    #app-container,
    #factura-container {
        margin: 1rem; /* Margen reducido */
        padding: 1.5rem; /* Relleno reducido */
        max-width: 100%; /* Ocupa todo el ancho */
    }

    #theme-toggle {
        width: 40px; /* Ancho fijo */
        height: 40px; /* Alto fijo */
        padding: 0.5rem; /* Relleno */
        border-radius: 50%; /* Completamente redondo */
        box-sizing: border-box; /* Incluye padding y borde en el tamaño */
    }

    #compraForm {
        grid-template-columns: 1fr; /* Una sola columna */
        gap: 0.8rem; /* Espacio reducido */
    }

    #filtroHistorial {
        flex-direction: column; /* Elementos en columna */
        align-items: stretch; /* Estira los elementos al ancho completo */
    }

    #filtroHistorial input,
    #filtroHistorial button {
        width: 100%; /* Ocupa todo el ancho */
    }

    input[type="date"],
    input[type="text"],
    input[type="number"],
    select {
        width: 100%; /* Ocupa todo el ancho */
    }

    button {
        width: 100%; /* Ocupa todo el ancho */
        padding: 0.85rem 1rem; /* Relleno ajustado */
        font-size: 1.05rem; /* Tamaño de fuente ajustado */
    }

    .factura-actions {
        flex-direction: column; /* Botones en columna */
        gap: 0.8rem; /* Espacio reducido */
    }

    .factura-actions button {
        width: 100%; /* Ocupa todo el ancho */
    }
}

/* Estilos para pantallas medianas (a partir de 600px) */
@media (min-width: 600px) {
    #compraForm {
        grid-template-columns: repeat(2, 1fr); /* Dos columnas */
        gap: 1.5rem 2rem; /* Espacio ajustado */
    }

    .form-group label {
        margin-bottom: 0.5rem; /* Margen ajustado */
    }

    .factura-actions button {
        width: 160px; /* Ancho fijo */
        padding: 0.75rem 1.8rem; /* Relleno ajustado */
        font-size: 1.1rem; /* Tamaño de fuente ajustado */
    }
}

/* Estilos para pantallas grandes (a partir de 1024px) */
@media (min-width: 1024px) {
    #app-container,
    #factura-container {
        max-width: 600px; /* Ancho máximo aumentado */
        padding: 3rem 4rem; /* Relleno aumentado */
        margin: 3rem auto; /* Margen y centrado */
    }

    #compraForm {
        grid-template-columns: 1fr; /* Vuelve a una columna */
        gap: 1.5rem; /* Espacio ajustado */
    }

    .form-group label {
        font-size: 1.1rem; /* Tamaño de fuente aumentado */
        margin-bottom: 0.6rem; /* Margen ajustado */
    }

    input[type="date"],
    input[type="text"],
    input[type="number"],
    select {
        font-size: 1.1rem; /* Tamaño de fuente aumentado */
        padding: 0.75rem 1rem; /* Relleno aumentado */
    }

    button {
        font-size: 1.2rem; /* Tamaño de fuente aumentado */
        padding: 1rem 2.5rem; /* Relleno aumentado */
    }

    .factura-actions button {
        width: 180px; /* Ancho fijo aumentado */
        font-size: 1.15rem; /* Tamaño de fuente ajustado */
        padding: 0.9rem 2.2rem; /* Relleno ajustado */
    }

    .factura-preview-content {
        padding: 2rem 3rem; /* Relleno aumentado */
        font-size: 1.1rem; /* Tamaño de fuente aumentado */
    }

    #factura-container h2 {
        font-size: 2.2rem; /* Tamaño de fuente aumentado */
    }
}

/* Estilos para el popup de SweetAlert2 (personalización responsiva) */
.my-responsive-popup {
    width: 90% !important; /* Ancho del popup */
    max-width: 400px !important; /* Ancho máximo */
    font-size: 1rem !important; /* Tamaño de fuente */
}

/* Ajustes para el popup en pantallas muy pequeñas */
@media (max-width: 400px) {
    .my-responsive-popup {
        width: 95% !important; /* Ancho aumentado */
        font-size: 0.9rem !important; /* Tamaño de fuente reducido */
    }
}

/* Estilos para el título del popup de SweetAlert2 */
.my-responsive-popup .swal2-title {
    font-size: 1.3rem !important; /* Tamaño de fuente del título */
}

/* Ajustes para el título del popup en pantallas muy pequeñas */
@media (max-width: 400px) {
    .my-responsive-popup .swal2-title {
        font-size: 1.1rem !important; /* Tamaño de fuente reducido */
    }
}

/* Estilos para el contenido HTML del popup de SweetAlert2 */
.my-responsive-popup .swal2-html-container {
    font-size: 1rem !important; /* Tamaño de fuente del contenido */
}

/* Ajustes para el contenido HTML del popup en pantallas muy pequeñas */
@media (max-width: 400px) {
    .my-responsive-popup .swal2-html-container {
        font-size: 0.9rem !important; /* Tamaño de fuente reducido */
    }
}